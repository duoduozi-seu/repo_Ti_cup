# ğŸ¯ 2025 TIæ¯å…¨å›½å¤§å­¦ç”Ÿç”µå­è®¾è®¡ç«èµ› Eé¢˜ï¼šç®€æ˜“è‡ªè¡Œç„å‡†è£…ç½® ğŸš€

ğŸŒŸ **è·å¥–ä½œå“**ï¼šçœçº§ä¸€ç­‰å¥– | ğŸ•’ 2025å¹´TIæ¯å…¨å›½å¤§å­¦ç”Ÿç”µå­è®¾è®¡ç«èµ›  
ğŸš— **æ ¸å¿ƒç³»ç»Ÿ**ï¼šæ™ºèƒ½å°è½¦ + ZDT42æ­¥è¿›ç”µæœºäº‘å° | ğŸ” **è§†è§‰æ¨¡å—**ï¼šMaxicam Pro AIè§†è§‰æ¨¡ç»„

## ğŸ“Œ é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®å®ç°äº†ä¸€å¥—é«˜åº¦é›†æˆçš„æ™ºèƒ½ç„å‡†ç³»ç»Ÿï¼Œç»“åˆäº†ï¼š
- ğŸ§­ **ç²¾å‡†è¿åŠ¨æ§åˆ¶**ï¼ˆPIDåŒç”µæœºæ§åˆ¶ï¼‰
- ğŸ¤– **AIè§†è§‰è¯†åˆ«**ï¼ˆMaxicam Proç›®æ ‡æ£€æµ‹ï¼‰
- ğŸ¯ **å®æ—¶åŠ¨æ€ç„å‡†**ï¼ˆä¸‰ç»´ç©ºé—´åæ ‡è½¬æ¢ï¼‰
- ğŸ“Š **å¤šæ¨¡æ€äº¤äº’ç³»ç»Ÿ**ï¼ˆOLED+çŸ©é˜µé”®ç›˜ï¼‰

ç³»ç»Ÿåœ¨å¤æ‚ç¯å¢ƒä¸‹è¡¨ç°å‡ºä¼˜å¼‚çš„ç¨³å®šæ€§å’Œç²¾ç¡®æ€§ï¼ŒæˆåŠŸè§£å†³äº†"ç§»åŠ¨å¹³å°ä¸Šçš„å®æ—¶ç„å‡†"è¿™ä¸€æ ¸å¿ƒæŒ‘æˆ˜ã€‚

## ğŸ§© ç³»ç»Ÿæ¶æ„

```
+-----------------+     +----------------+     +---------------+
|  è§†è§‰å¤„ç†æ¨¡å—     |<--->| ä¸»æ§åˆ¶å™¨(MSPM0) |<--->| äº‘å°æ§åˆ¶ç³»ç»Ÿ    |
| (Maxicam Pro)   |     |                |     | (ZDT42æ­¥è¿›)   |
+-----------------+     +-------+--------+     +---------------+
            â†‘                   |                    â†‘
            |                   |                    |
            |                   â†“                    |
      +------------+     +---------------+     +---------------+
      | è·¯å¾„è¯†åˆ«    |     | ç”µæœºæ§åˆ¶ç³»ç»Ÿ    |     |   æ¿€å…‰å‘å°„è£…ç½®  |
      |  K230      |     | (PID+ç¼–ç å™¨)   |     |               |
      +------------+     +---------------+     +---------------+
```

## ğŸ’¡ æ ¸å¿ƒåˆ›æ–°ç‚¹

1. **åŠ¨æ€PIDè°ƒæ•´ç³»ç»Ÿ** ğŸ”„
   ```c
   void adj_perf4_pid() { // å®æ—¶è°ƒæ•´å·¡çº¿/è½¬å‘å‚æ•°
     KP_p4 = InputFloat(8, 2, 0); 
     KD_p4 = InputFloat(8, 2, 0);
   }
   ```

2. **ä¸‰ç»´ç©ºé—´åæ ‡æ˜ å°„** ğŸ—ºï¸
   ```c
   // ä»å°è½¦åæ ‡ç³»è½¬æ¢åˆ°ä¸–ç•Œåæ ‡ç³»
   void calculate_angles_for_perf4(float x, float y, float height, int car_direction, 
                         float target_x, float target_y, float target_height,
                         float *yaw, float *pitch) {
     // ç©ºé—´å‡ ä½•è§£ç®—æ ¸å¿ƒç®—æ³•
   }
   ```

3. **å¤åˆä»»åŠ¡å¤„ç†å™¨** âš™ï¸
   ```c
   void Perform4() { // å·¡çº¿+æ‰“é¶å¤åˆä»»åŠ¡
     while(car_stage != 's'){
       go_on_line(0.25);      // å·¡çº¿æ§åˆ¶
       update_motor_speed();  // ç”µæœºæ›´æ–°
       if(perf_4_flag) {      // æ‰“é¶æ¡ä»¶æ£€æµ‹
         calculate_target();  // ç›®æ ‡è§£ç®—
       }
     }
   }
   ```

## ğŸ§  æ™ºèƒ½æ ¸å¿ƒæ¨¡å—

### 1. è¿åŠ¨æ§åˆ¶ç³»ç»Ÿ (`motor.c`)
```c
// è‡ªé€‚åº”å·¡çº¿ç®—æ³•
int go_on_line(float speed_m_per_s) {
  float current_error = line_error; // è§†è§‰è¯¯å·®è¾“å…¥
  float p_term = KP * current_error; 
  float d_term = KD * (current_error - last_error);
  // ...æ™ºèƒ½é€Ÿåº¦åˆ†é…ç®—æ³•...
}

// ç²¾ç¡®è½¬å‘æ§åˆ¶
void turn_pid(float base_speed, float target_angle, float threshold, float Kp) {
  while (fabsf(calculate_yaw_error(target_angle, yaw)) >= threshold) {
    // å®æ—¶è°ƒæ•´è½¬å‘å‚æ•°
  }
}
```

### 2. äº‘å°ç„å‡†ç³»ç»Ÿ (`PTZ_controller.c`)
```c
// ä¸–ç•Œåæ ‡ç³»è½¬æ¢
void calculate_angles(float x, float y, float* theta_x, float* theta_y) {
  *theta_x = atan2f(x, dist_to_canvas) * (180.0f / M_PI);
  float effective_dist = sqrtf(x*x + dist_to_canvas*dist_to_canvas);
  *theta_y = atan2f(y - pen_height, effective_dist) * (180.0f / M_PI);
}

// äº¤äº’å¼äº‘å°æ§åˆ¶
void contrl_ptz() {
  int x = (int)InputFloat(5, 0, 0); // Xè½´è§’åº¦
  int y = (int)InputFloat(5, 0, 0); // Yè½´è§’åº¦
  set_xy_offsets(x,y); // è®¾ç½®äº‘å°ä½ç½®
}
```

### 3. è§†è§‰é€šä¿¡ç³»ç»Ÿ (`uart_handler.c`)
```c
// é²æ£’æ€§é€šä¿¡åè®®
void extract_template(uint8_t *data, uint8_t size) {
  if(data[0]=='<' && data[7]=='>') { // å¸§æ ¡éªŒ
    // æ•°æ®æå–ä¸è½¬æ¢
    convert_to_float(nums); // è§†è§‰è¯¯å·®å€¼è½¬æ¢
  }
}

// DMAåŒç¼“å†²ä¼ è¾“
void uart_init(void) {
  DL_UART_Main_enableDMAReceiveEvent(UART_K230_INST, DL_UART_DMA_INTERRUPT_RX);
  // ...åŒç¼“å†²é…ç½®...
}
```

### 4. å¤šä»»åŠ¡è°ƒåº¦ç³»ç»Ÿ (`main.c`)
```c
while(1) {
  char key = KEY_SCAN(); // çŸ©é˜µé”®æ‰«æ
  switch (key) {
    case 1: Perform1(); break; // åŸºç¡€å·¡çº¿
    case 4: Perform4(); break; // å·¡çº¿+æ‰“é¶
    case 7: contrl_ptz(); break; // æ‰‹åŠ¨äº‘å°
    case 11: adj_line_pid(); break; // PIDè°ƒæ•´
  }
}
```

## ğŸ› ï¸ ç¡¬ä»¶é…ç½®

| æ¨¡å—         | å‹å·/è§„æ ¼                     | åŠŸèƒ½ç‰¹ç‚¹                     |
|--------------|-------------------------------|-----------------------------|
| ä¸»æ§åˆ¶å™¨     | TI MSPM0G3507                 | 80MHz Cortex-M0+æ ¸å¿ƒ       |
| é©±åŠ¨ç”µæœº     | MG520Xç›´æµå‡é€Ÿç”µæœº         | 6V/300RPMï¼Œé›†æˆå…‰ç”µç¼–ç å™¨   |
| äº‘å°ç”µæœº     | ZDT42æ­¥è¿›ç”µæœº                 | 1.8Â°æ­¥è¿›è§’ï¼Œé«˜ç²¾åº¦é—­ç¯æ§åˆ¶  |
| è§†è§‰æ¨¡å—     | Maxicam Pro AIè§†è§‰æ¨¡ç»„        | æ”¯æŒYOLOv5ç›®æ ‡æ£€æµ‹          |
| å§¿æ€ä¼ æ„Ÿå™¨  | LSM6DSV16X 6è½´IMU             | Â±2000dpsï¼Œä½å™ªå£°|
| æ˜¾ç¤ºæ¨¡å—     | SSD1306 0.96å¯¸OLED            | 128Ã—64åˆ†è¾¨ç‡ï¼ŒI^2^Cæ¥å£       |
| è¾“å…¥è®¾å¤‡     | 4Ã—4çŸ©é˜µé”®ç›˜                   | 16é”®å¤šåŠŸèƒ½æ§åˆ¶              |

## ğŸ’» å¼€å‘ç¯å¢ƒ

1. **ç¼–è¯‘ç¯å¢ƒ**ï¼š  
    TI Code Composer Studio  
   - é›†æˆç¼–è¯‘+è°ƒè¯•+çƒ§å½•ä¸€ä½“åŒ–ç¯å¢ƒ
   - å®Œæ•´MSPM0èŠ¯ç‰‡æ”¯æŒåŒ…
   - å®æ—¶å˜é‡ç›‘æ§ä¸åˆ†æå·¥å…·

2. **çƒ§å½•å·¥å…·**ï¼š  
    TI XDS110 Debug Probe  
   - é€šè¿‡USBç›´æ¥çƒ§å½•å’Œè°ƒè¯•
   - æ”¯æŒå®æ—¶å˜é‡ç›‘æ§
   - 4çº¿JTAGæ¥å£

3. **ä¾èµ–åº“**ï¼š
   ```bash
   DriverLib - MSPM0å¤–è®¾é©±åŠ¨åº“
   grlib - å›¾å½¢æ˜¾ç¤ºåº“
   math.h - æ•°å­¦è¿ç®—åº“
   ```

## ğŸ“‹ ä½¿ç”¨æŒ‡å—

1. **ç¯å¢ƒé…ç½®**ï¼š
   ```bash
   1. å®‰è£…CCS
   2. å¯¼å…¥é¡¹ç›®å·¥ç¨‹
   3. è¿æ¥XDS110è°ƒè¯•å™¨
   ```

2. **æ“ä½œæµç¨‹**ï¼š
   ```mermaid
   graph TD
     A[ä¸Šç”µåˆå§‹åŒ–] --> B{æŒ‰é”®é€‰æ‹©æ¨¡å¼}
     B -->|æŒ‰é”®1| C[åŸºç¡€å·¡çº¿]
     B -->|æŒ‰é”®4| D[å·¡çº¿+æ‰“é¶]
     B -->|æŒ‰é”®7| E[æ‰‹åŠ¨äº‘å°æ§åˆ¶]
     C --> F[æ‰§è¡Œä»»åŠ¡]
     D --> F
     E --> G[è¾“å…¥åæ ‡å‚æ•°]
   ```

3. **å‚æ•°è°ƒæ•´**ï¼š
   ```c
   // å…³é”®æ€§èƒ½å‚æ•°
   #define KP 0.0021f    // å·¡çº¿æ¯”ä¾‹ç³»æ•°
   #define KD 0.00021f   // å·¡çº¿å¾®åˆ†ç³»æ•°
   #define MOVE_DELAY 20.0f // äº‘å°è¿åŠ¨å»¶æ—¶
   ```


## ğŸ“œ ç‰ˆæƒå£°æ˜

Â© 2025 ç”Ÿä¸ºåˆºçŒ¬é˜Ÿï¼ˆä¸œå—å¤§å­¦ï¼‰ - ä¿ç•™æ‰€æœ‰æƒåˆ©  
ä»£ç æˆæƒï¼šMIT License  
TIé©±åŠ¨åº“ç‰ˆæƒå½’Texas Instruments Incorporatedæ‰€æœ‰